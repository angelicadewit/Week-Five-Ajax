{"version":3,"sources":["main.js"],"names":["API_KEY","termEl","document","getElementById","locationEl","searchBtn","resultsEl","addEventListener","e","preventDefault","queryTerm","value","location","prices","getCheckedValues","querySelectorAll","searchYelp","axios","get","params","headers","then","response","console","log","data","generateSuccessHTMLOutput","sendDataToGoogle","checkedItems","checkedValues","map","checkedItem","allChecked","join","innerHTML","businesses","forEach","$li","createElement","$h2","$pAddress","$pCity","$imgEl","business","url","name","price","rating","src","image_url","style","width","height","address1","city","zip_code","marginBottom","appendChild","locationsArray","coordinate","lat","coordinates","latitude","lng","longitude","phone","push","GoogleMapModule","showMarkers"],"mappings":";;;;AAAC,aAAW;;AAEX,KAAMA,UAAU,kIAAhB;;AAEA,KAAMC,SAASC,SAASC,cAAT,CAAwB,MAAxB,CAAf;AACA,KAAMC,aAAaF,SAASC,cAAT,CAAwB,UAAxB,CAAnB;AACA,KAAME,YAAYH,SAASC,cAAT,CAAwB,QAAxB,CAAlB;AACA,KAAMG,YAAYJ,SAASC,cAAT,CAAwB,SAAxB,CAAlB;;AAEAE,WAAUE,gBAAV,CAA2B,OAA3B,EAAmC,UAASC,CAAT,EAAY;AAC9CA,IAAEC,cAAF;AACA,MAAMC,YAAYT,OAAOU,KAAzB;AACA,MAAMC,WAAWR,WAAWO,KAA5B;AACA,MAAME,SAASC,iBAAiBZ,SAASa,gBAAT,CAA0B,sBAA1B,CAAjB,CAAf;AACAC,aAAWJ,QAAX,EAAoBF,SAApB,EAA8BG,MAA9B;AACA,EAND;;AAWA,KAAIG,aAAa,SAAbA,UAAa,CAASJ,QAAT,EAAmBF,SAAnB,EAA8BG,MAA9B,EAAqC;AACrDI,QAAMC,GAAN,CAAU,mDAAV,EAA+D;AAC9DC,WAAQ;AACP,WAAO,oBADA;AAEP,YAAQT,SAFD;AAGP,gBAAYE,QAHL;AAIP,aAASC;AAJF,IADsD;AAO9DO,YAAS;AACR,qBAAiB,YAAYpB;AADrB;AAPqD,GAA/D,EAUGqB,IAVH,CAUQ,UAAUC,QAAV,EAAoB;AAC3BC,WAAQC,GAAR,CAAY,WAAZ,EAAyBF,SAASG,IAAlC,EAAwCH,QAAxC;AACAI,6BAA0BJ,QAA1B;AACAK,oBAAiBL,QAAjB;AACA,GAdD;AAeA,EAhBD;;AAkBA,KAAIR,mBAAmB,SAAnBA,gBAAmB,CAASc,YAAT,EAAuB;AAC7C,MAAMC,gBAAgB,6BAAID,YAAJ,GAAkBE,GAAlB,CAAsB,UAASC,WAAT,EAAsB;AACjE,UAAOA,YAAYpB,KAAnB;AACA,GAFqB,CAAtB;AAGA,MAAMqB,aAAaH,cAAcI,IAAd,CAAmB,GAAnB,CAAnB;AACAV,UAAQC,GAAR,CAAY,YAAZ,EAA0BQ,UAA1B;AACA,SAAOA,UAAP;AACA,EAPD;;AASA,KAAIN,4BAA4B,SAA5BA,yBAA4B,CAASJ,QAAT,EAAmB;AAClDhB,YAAU4B,SAAV,GAAsB,GAAtB;AACAZ,WAASG,IAAT,CAAcU,UAAd,CAAyBC,OAAzB,CAAiC,oBAAY;AAC5C,OAAIC,MAAMnC,SAASoC,aAAT,CAAuB,IAAvB,CAAV;AACA,OAAIC,MAAMrC,SAASoC,aAAT,CAAuB,IAAvB,CAAV;AACA,OAAIE,YAAYtC,SAASoC,aAAT,CAAuB,GAAvB,CAAhB;AACA,OAAIG,SAASvC,SAASoC,aAAT,CAAuB,GAAvB,CAAb;AACA,OAAMI,SAASxC,SAASoC,aAAT,CAAuB,KAAvB,CAAf;;AAEAC,OAAIL,SAAJ,GAAgB,cAAcS,SAASC,GAAvB,GAA6B,IAA7B,GAAoCD,SAASE,IAA7C,GAAoD,MAApD,GAA6D,KAA7D,GAAqEF,SAASG,KAA9E,GAAsF,KAAtF,GAA8FH,SAASI,MAAvH;AACAL,UAAOM,GAAP,GAAaL,SAASM,SAAtB;AACAP,UAAOQ,KAAP,CAAaC,KAAb,GAAqB,OAArB;AACAT,UAAOQ,KAAP,CAAaE,MAAb,GAAsB,OAAtB;AACAZ,aAAUN,SAAV,GAAsBS,SAAS/B,QAAT,CAAkByC,QAAxC;AACAZ,UAAOP,SAAP,GAAmBS,SAAS/B,QAAT,CAAkB0C,IAAlB,GAAyB,GAAzB,GAA+BX,SAAS/B,QAAT,CAAkB2C,QAApE;AACAd,UAAOS,KAAP,CAAaM,YAAb,GAA4B,KAA5B;;AAEAnB,OAAIoB,WAAJ,CAAgBlB,GAAhB;AACAF,OAAIoB,WAAJ,CAAgBf,MAAhB;AACAL,OAAIoB,WAAJ,CAAgBjB,SAAhB;AACAH,OAAIoB,WAAJ,CAAgBhB,MAAhB;;AAGAnC,aAAUmD,WAAV,CAAsBpB,GAAtB;AACA,GAtBD;AAuBA,EAzBD;;AA2BA,KAAIV,mBAAmB,SAAnBA,gBAAmB,CAASL,QAAT,EAAkB;AACxC,MAAIoC,iBAAiB,EAArB;AACApC,WAASG,IAAT,CAAcU,UAAd,CAAyBC,OAAzB,CAAiC,oBAAY;AAC5C,OAAMuB,aAAa;AAClBd,UAAMF,SAASE,IADG;AAElBe,SAAKjB,SAASkB,WAAT,CAAqBC,QAFR;AAGlBC,SAAKpB,SAASkB,WAAT,CAAqBG,SAHR;AAIlBC,WAAOtB,SAASsB;AAJE,IAAnB;AAMAP,kBAAeQ,IAAf,CAAoBP,UAApB;AACA,GARD;AASA;AACAQ,kBAAgBC,WAAhB,CAA4BV,cAA5B;AACA,EAbD;;AAeA,QAAO;AACN/B,oBAAkBA;AADZ,EAAP;AAIA,CA7FA,GAAD","file":"main.js","sourcesContent":["(function() {\n\n\tconst API_KEY = \"U5rQPUaVIkcyszlF6HT43gOJKsl9C2Riq0hFHAGt9nWm6eVQiZdIn39X1Un0wu-5QuTpG43jdXTPT2kEh0lyFQdv4Nkdv3uZJP-kurKrCo7z1xXNlpMaLAgYTGPiWnYx\"\n\n\tconst termEl = document.getElementById('term');\n\tconst locationEl = document.getElementById('location');\n\tconst searchBtn = document.getElementById('search');\n\tconst resultsEl = document.getElementById('results');\n\n\tsearchBtn.addEventListener('click',function(e) {\n\t\te.preventDefault();\n\t\tconst queryTerm = termEl.value\n\t\tconst location = locationEl.value\n\t\tconst prices = getCheckedValues(document.querySelectorAll('[name=price]:checked')); \n\t\tsearchYelp(location,queryTerm,prices)\n\t})\n\n\n\n\n\tlet searchYelp = function(location, queryTerm, prices){\n\t\taxios.get('https://circuslabs.net/proxies/yelp-fusion-proxy/', {\n\t\t\tparams: {\n\t\t\t\t'_ep': '/businesses/search',\n\t\t\t\t'term': queryTerm,\n\t\t\t\t'location': location,\n\t\t\t\t'price': prices,\n\t\t\t},\n\t\t\theaders: {\n\t\t\t\t'Authorization': 'Bearer ' + API_KEY\n\t\t\t}\n\t\t}).then(function (response) {\n\t\t\tconsole.log('response:', response.data, response)\n\t\t\tgenerateSuccessHTMLOutput(response);\n\t\t\tsendDataToGoogle(response);\n\t\t});    \n\t}\n\n\tlet getCheckedValues = function(checkedItems) {\n\t\tconst checkedValues = [...checkedItems].map(function(checkedItem) {\n\t\t\treturn checkedItem.value;\n\t\t});\n\t\tconst allChecked = checkedValues.join(',');\n\t\tconsole.log('allChecked', allChecked);\n\t\treturn allChecked\n\t}\n\n\tlet generateSuccessHTMLOutput = function(response) {\n\t\tresultsEl.innerHTML = \" \";\n\t\tresponse.data.businesses.forEach(business => {\n\t\t\tlet $li = document.createElement(\"li\")\n\t\t\tlet $h2 = document.createElement(\"h2\")\n\t\t\tlet $pAddress = document.createElement(\"p\")\n\t\t\tlet $pCity = document.createElement(\"p\")\n\t\t\tconst $imgEl = document.createElement('img');\n\t\t\t\n\t\t\t$h2.innerHTML = '<a href=\"' + business.url + '\">' + business.name + '</a>' + \" - \" + business.price + \" - \" + business.rating\n\t\t\t$imgEl.src = business.image_url;\n\t\t\t$imgEl.style.width = '300px';\n\t\t\t$imgEl.style.height = '200px';\n\t\t\t$pAddress.innerHTML = business.location.address1\n\t\t\t$pCity.innerHTML = business.location.city + \" \" + business.location.zip_code\n\t\t\t$pCity.style.marginBottom = \"5px\";\n\n\t\t\t$li.appendChild($h2);\n\t\t\t$li.appendChild($imgEl);\n\t\t\t$li.appendChild($pAddress);\n\t\t\t$li.appendChild($pCity);\n\n\n\t\t\tresultsEl.appendChild($li)\n\t\t})\n\t}\n\n\tlet sendDataToGoogle = function(response){\n\t\tvar locationsArray = []\n\t\tresponse.data.businesses.forEach(business => {\n\t\t\tconst coordinate = {\n\t\t\t\tname: business.name,\n\t\t\t\tlat: business.coordinates.latitude, \n\t\t\t\tlng: business.coordinates.longitude,\n\t\t\t\tphone: business.phone,\n\t\t\t}    \n\t\t\tlocationsArray.push(coordinate)\n\t\t})\n\t\t// console.table(locationsArray)\n\t\tGoogleMapModule.showMarkers(locationsArray)\n\t}\n\t\n\treturn {\n\t\tsendDataToGoogle: sendDataToGoogle\n\t}\n\n}());"]}